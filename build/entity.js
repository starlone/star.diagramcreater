function Entity(t){this.name=t.name||"Entity",this.columns=[]}function EntityMDL(t){this.containment=t.containment||".drag-area";var n=t.name||"Entity";this.entity=new Entity({name:n}),this.element=$("<div />"),this.element.attr("class","entity draggable mdl-card mdl-shadow--2dp");var e=$(".entity").length+1,i=$('<div class="mdl-card__title" />'),a=$('<h2 class="entity-title mdl-card__title-text" />').html(this.entity.name);i.append(a);var o=$('<div class="pbuttons mdl-card__menu" >'),s=$('<button class="bclose mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" />');s.append($('<i class="material-icons" />').text("delete")),o.append(s);var l=$('<table class="mdl-card__supporting-text mdl-data-table mdl-js-data-table" />'),m=$("<tbody />");l.append(m),this.element.attr("id","entity-"+e),this.element.append(i).append(l).append(o),this.newColumn("id","SERIAL"),this.newColumn("name","CHAR"),this.element.draggable({containment:this.containment,cursor:"move",scroll:!0,stack:".draggable"})}function Column(t,n){this.name=t,this.type=n}Entity.prototype.newColumn=function(t,n){var e=new Column(t,n);this.columns.push(e)},EntityMDL.prototype.getElement=function(){return this.element},EntityMDL.prototype.getId=function(){return this.element.attr("id")},EntityMDL.prototype.setName=function(t){t&&(this.entity.name=t,this.element.find(".entity-title").html(t))},EntityMDL.prototype.setPosition=function(t){var n=this.element.position(),e=$(this.containment).position(),i=e.top-n.top+t.top,a=e.left-n.left+t.left;this.element.css("top",i).css("left",a)},EntityMDL.prototype.getSQL=function(){var t="CREATE TABLE ";t+=this.entity.name,t+="\n{\n    ";var n=[];for(var e in this.entity.columns){var i=this.entity.columns[e];n.push(i.getSQL())}return t+=n.join(",\n    "),t+="\n};\n"},EntityMDL.prototype.newColumn=function(t,n){this.entity.newColumn(t,n);var e=$("<tr />"),i=$("<td />").html(t),a=$("<td />").html(n);this.element.find("tbody").append(e),e.append(i).append(a)},Column.prototype.getSQL=function(){return this.name+" "+this.type};